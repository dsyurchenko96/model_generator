# Проект по генерации и обработке JSON документов

## Описание

Этот проект включает в себя CLI инструмент и REST приложение для генерации моделей и роутеров на основе пользовательских JSON схем. Приложение предназначено для валидации JSON документов и работы с ними через REST API. База данных используется для хранения JSON документов.

## Компоненты

### CLI приложение

CLI инструмент предназначен для:

- Генерации Pydantic моделей на основе описания JSON схемы.
- Генерации кода контроллеров для REST приложения, которые обрабатывают JSON документы.

### REST приложение

REST приложение обрабатывает JSON документы и включает сгенерированные контроллеры. Оно предоставляет следующие эндпоинты для каждого вида (kind) документа:

- **POST**: /{kind}/ - Создание нового JSON документа.
- **PUT**: /{kind}/{uuid}/configuration/ - Изменение словаря configuration.
- **PUT**: /{kind}/{uuid}/settings/ - Изменение словаря settings.
- **PUT**: /{kind}/{uuid}/state - Обновление статуса приложения.
- **DELETE**: /{kind}/{uuid}/ - Удаление JSON документа.
- **GET**: /{kind}/{uuid} - Возвращение JSON документа.
- **GET**: /{kind}/{uuid}/state - Возвращение статуса документа.

### База данных

Используется реляционная база данных для хранения JSON документов. Таблица `apps` имеет следующие колонки:

- `UUID` - уникальный идентификатор.
- `kind` - тип документа.
- `name` - имя документа.
- `version` - версия документа.
- `description` - описание документа.
- `state` - состояние документа (NEW, INSTALLING, RUNNING).
- `json` - JSON документ.

## Использование

### Требования

- Docker

### Запуск проекта
```bash
make run
```

### Генерация моделей и роутеров
После запуска контейнера, выполните команду для генерации моделей:


```bash
gen-cli gen-models --json-schema=/path/to/schema.json --out-dir=/path/to/models/
```
Для генерации роутеров выполните команду:


```bash
gen-cli gen-routes --models=/path/to/models/ --rest-routes=/path/to/routes/
```
### Выход из контейнера
Для выхода из контейнера выполните команду:

```exit```

### Команды Makefile
- up: Запуск всех контейнеров.
- run: Запуск и вход в контейнер с сервером.
- down: Остановка всех контейнеров.
- view_db: Вход в контейнер с базой данных и запуск psql для просмотра базы данных в докере.
- logs: Просмотр логов всех контейнеров.
- clean: Остановка и удаление всех контейнеров и образов.
- rebuild: Полная очистка и повторный запуск всех контейнеров.
